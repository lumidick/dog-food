{"ast":null,"code":"import _objectSpread from\"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useForm}from\"react-hook-form\";import{useDispatch}from\"react-redux\";import{fetchCreateReview}from\"../../storage/singleProduct/singleProductSlice\";import{INITIAL_VALUE_RATING,VALIDATE_CONFIG}from\"../../utils/contants\";import Form from\"../Form/form\";import{FormButton}from\"../FormButton/form-button\";import{FormInput}from\"../FormInput/form-input\";import{Rating}from\"../Rating/rating\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var FormReview=function FormReview(_ref){var _errors$email;var _ref$title=_ref.title,title=_ref$title===void 0?'Отзыв о товаре':_ref$title,productId=_ref.productId,setProduct=_ref.setProduct;var _useForm=useForm({mode:\"onBlur\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var _useState=useState(INITIAL_VALUE_RATING),_useState2=_slicedToArray(_useState,2),rating=_useState2[0],setRating=_useState2[1];var dispatch=useDispatch();var sendReviewProduct=function sendReviewProduct(data){dispatch(fetchCreateReview({productId:productId,data:data})).then(function(){reset();setRating(INITIAL_VALUE_RATING);});};var textReview=register('text',{required:{value:true,message:VALIDATE_CONFIG.requiredMessage}});return/*#__PURE__*/_jsxs(Form,{title:title,handleFormSubmit:handleSubmit(sendReviewProduct),children:[/*#__PURE__*/_jsx(Rating,{rating:rating,isEditable:true,setRating:setRating}),/*#__PURE__*/_jsx(FormInput,_objectSpread(_objectSpread({},textReview),{},{id:\"text\",typeinput:\"textarea\",placeholder:\"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043A\\u0441\\u0442 \\u043E\\u0442\\u0437\\u044B\\u0432\\u044B\"})),(errors===null||errors===void 0?void 0:errors.email)&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMessage\",children:errors===null||errors===void 0?void 0:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}),/*#__PURE__*/_jsx(FormButton,{type:\"submit\",color:\"yellow\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"})]});};","map":{"version":3,"names":["useState","useForm","useDispatch","fetchCreateReview","INITIAL_VALUE_RATING","VALIDATE_CONFIG","Form","FormButton","FormInput","Rating","FormReview","title","productId","setProduct","mode","register","handleSubmit","errors","formState","reset","rating","setRating","dispatch","sendReviewProduct","data","then","textReview","required","value","message","requiredMessage","email"],"sources":["/home/titus/Рабочий стол/dog-food/src/components/FormReview/form-review.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { fetchCreateReview } from \"../../storage/singleProduct/singleProductSlice\";\nimport { INITIAL_VALUE_RATING, VALIDATE_CONFIG } from \"../../utils/contants\";\nimport Form from \"../Form/form\";\nimport { FormButton } from \"../FormButton/form-button\";\nimport { FormInput } from \"../FormInput/form-input\";\nimport { Rating } from \"../Rating/rating\";\n\nexport const FormReview = ({title = 'Отзыв о товаре', productId, setProduct}) => {\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({ mode: \"onBlur\" })\n    const [rating, setRating] = useState(INITIAL_VALUE_RATING)\n    const dispatch = useDispatch();\n\n    const sendReviewProduct = (data) => {\n        dispatch(fetchCreateReview({productId, data}))\n            .then(()=> {\n                reset();\n                setRating(INITIAL_VALUE_RATING)\n            })\n    }\n \n    const textReview = register('text', {\n        required: {\n            value: true,\n            message: VALIDATE_CONFIG.requiredMessage\n        }\n    })\n\n    return (\n        <Form title={title} handleFormSubmit={handleSubmit(sendReviewProduct)}>\n            \n            <Rating rating={rating} isEditable setRating={setRating} />\n\n            <FormInput\n                {...textReview}\n                id=\"text\"\n                typeinput=\"textarea\"\n                placeholder=\"Напишите текст отзывы\"\n            />\n            {errors?.email && <p className='errorMessage'>{errors?.email?.message}</p>}\n\n            <FormButton type=\"submit\" color=\"yellow\">Отправить отзыв</FormButton>\n        </Form>\n    )\n}"],"mappings":"2VAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,iBAAiB,KAAQ,gDAAgD,CAClF,OAASC,oBAAoB,CAAEC,eAAe,KAAQ,sBAAsB,CAC5E,MAAOC,KAAI,KAAM,cAAc,CAC/B,OAASC,UAAU,KAAQ,2BAA2B,CACtD,OAASC,SAAS,KAAQ,yBAAyB,CACnD,OAASC,MAAM,KAAQ,kBAAkB,CAAC,wFAE1C,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAU,MAA0D,uCAArDC,KAAK,CAALA,KAAK,qBAAG,gBAAgB,YAAEC,SAAS,MAATA,SAAS,CAAEC,UAAU,MAAVA,UAAU,CACvE,aAAiEZ,OAAO,CAAC,CAAEa,IAAI,CAAE,QAAS,CAAC,CAAC,CAApFC,QAAQ,UAARA,QAAQ,CAAEC,YAAY,UAAZA,YAAY,CAAeC,MAAM,UAAnBC,SAAS,CAAID,MAAM,CAAIE,KAAK,UAALA,KAAK,CAC5D,cAA4BnB,QAAQ,CAACI,oBAAoB,CAAC,wCAAnDgB,MAAM,eAAEC,SAAS,eACxB,GAAMC,SAAQ,CAAGpB,WAAW,EAAE,CAE9B,GAAMqB,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIC,IAAI,CAAK,CAChCF,QAAQ,CAACnB,iBAAiB,CAAC,CAACS,SAAS,CAATA,SAAS,CAAEY,IAAI,CAAJA,IAAI,CAAC,CAAC,CAAC,CACzCC,IAAI,CAAC,UAAK,CACPN,KAAK,EAAE,CACPE,SAAS,CAACjB,oBAAoB,CAAC,CACnC,CAAC,CAAC,CACV,CAAC,CAED,GAAMsB,WAAU,CAAGX,QAAQ,CAAC,MAAM,CAAE,CAChCY,QAAQ,CAAE,CACNC,KAAK,CAAE,IAAI,CACXC,OAAO,CAAExB,eAAe,CAACyB,eAC7B,CACJ,CAAC,CAAC,CAEF,mBACI,MAAC,IAAI,EAAC,KAAK,CAAEnB,KAAM,CAAC,gBAAgB,CAAEK,YAAY,CAACO,iBAAiB,CAAE,wBAElE,KAAC,MAAM,EAAC,MAAM,CAAEH,MAAO,CAAC,UAAU,MAAC,SAAS,CAAEC,SAAU,EAAG,cAE3D,KAAC,SAAS,gCACFK,UAAU,MACd,EAAE,CAAC,MAAM,CACT,SAAS,CAAC,UAAU,CACpB,WAAW,CAAC,sHAAuB,GACrC,CACD,CAAAT,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEc,KAAK,gBAAI,UAAG,SAAS,CAAC,cAAc,UAAEd,MAAM,SAANA,MAAM,gCAANA,MAAM,CAAEc,KAAK,wCAAb,cAAeF,OAAO,EAAK,cAE1E,KAAC,UAAU,EAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,UAAC,uFAAe,EAAa,GAClE,CAEf,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}