{"ast":null,"code":"import _regeneratorRuntime from\"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{isError}from'../../utils/store';export var fetchSingleProduct=createAsyncThunk('singleProduct/fetchSingleProduct',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(productId,_ref){var rejectWithValue,fulfillWithValue,api,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:rejectWithValue=_ref.rejectWithValue,fulfillWithValue=_ref.fulfillWithValue,api=_ref.extra;_context.prev=1;_context.next=4;return api.getProductById(productId);case 4:data=_context.sent;return _context.abrupt(\"return\",fulfillWithValue(data));case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);return _context.abrupt(\"return\",rejectWithValue(_context.t0));case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var fetchCreateReview=createAsyncThunk('singleProduct/fetchCreateReview',/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref3,_ref4){var productId,body,rejectWithValue,fulfillWithValue,api,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:productId=_ref3.productId,body=_ref3.data;rejectWithValue=_ref4.rejectWithValue,fulfillWithValue=_ref4.fulfillWithValue,api=_ref4.extra;_context2.prev=2;_context2.next=5;return api.createReviewProduct(productId,body);case 5:data=_context2.sent;return _context2.abrupt(\"return\",fulfillWithValue(data));case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);return _context2.abrupt(\"return\",rejectWithValue(_context2.t0));case 12:case\"end\":return _context2.stop();}},_callee2,null,[[2,9]]);}));return function(_x3,_x4){return _ref5.apply(this,arguments);};}());var initialState={data:{},loading:true,error:null};var singleProductSlice=createSlice({name:'singleProduct',initialState:initialState,reducers:{setProductState:function setProductState(state,action){state.data=action.payload;}},extraReducers:function extraReducers(builder){builder.addCase(fetchSingleProduct.pending,function(state,action){state.loading=true;state.error=null;}).addCase(fetchSingleProduct.fulfilled,function(state,action){state.data=action.payload;state.loading=false;}).addCase(fetchCreateReview.fulfilled,function(state,action){state.data=action.payload;state.loading=false;}).addMatcher(isError,function(state,action){state.error=action.payload;state.loading=false;});}});var setProductState=singleProductSlice.actions.setProductState;export{setProductState};export default singleProductSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","isError","fetchSingleProduct","productId","rejectWithValue","fulfillWithValue","api","extra","getProductById","data","fetchCreateReview","body","createReviewProduct","initialState","loading","error","singleProductSlice","name","reducers","setProductState","state","action","payload","extraReducers","builder","addCase","pending","fulfilled","addMatcher","actions","reducer"],"sources":["/home/titus/Рабочий стол/dog-food/src/storage/singleProduct/singleProductSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { isError } from '../../utils/store';\n\nexport const fetchSingleProduct = createAsyncThunk(\n  'singleProduct/fetchSingleProduct',\n  async function (productId,{ rejectWithValue, fulfillWithValue, extra: api }) {\n    try {\n      const data = await api.getProductById(productId);\n\n      return fulfillWithValue(data);\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\n\nexport const fetchCreateReview = createAsyncThunk(\n  'singleProduct/fetchCreateReview',\n  async function ({productId, data: body},{ rejectWithValue, fulfillWithValue, extra: api }) {\n    try {\n      const data = await api.createReviewProduct(productId, body);\n      return fulfillWithValue(data);\n\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\n\nconst initialState = {\n  data: {},\n  loading: true,\n  error: null,\n};\n\nconst singleProductSlice = createSlice({\n  name: 'singleProduct',\n  initialState,\n  reducers: {\n    setProductState: (state, action) => {\n      state.data = action.payload;\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchSingleProduct.pending, (state, action) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchSingleProduct.fulfilled, (state, action) => {\n        state.data = action.payload;\n        state.loading = false;\n      })\n      .addCase(fetchCreateReview.fulfilled, (state, action) => {\n        state.data = action.payload;\n        state.loading = false;\n      })\n      .addMatcher(isError, (state, action) => {\n        state.error = action.payload;\n        state.loading = false;\n      })\n  },\n});\n\nexport const { setProductState } = singleProductSlice.actions; \nexport default singleProductSlice.reducer;\n"],"mappings":"4WAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAQ,kBAAkB,CAChE,OAASC,OAAO,KAAQ,mBAAmB,CAE3C,MAAO,IAAMC,mBAAkB,CAAGF,gBAAgB,CAChD,kCAAkC,6FAClC,iBAAgBG,SAAS,sKAAGC,eAAe,MAAfA,eAAe,CAAEC,gBAAgB,MAAhBA,gBAAgB,CAASC,GAAG,MAAVC,KAAK,uCAE7CD,IAAG,CAACE,cAAc,CAACL,SAAS,CAAC,QAA1CM,IAAI,+CAEHJ,gBAAgB,CAACI,IAAI,CAAC,0FAEtBL,eAAe,aAAO,qEAEhC,oEACF,CAGD,MAAO,IAAMM,kBAAiB,CAAGV,gBAAgB,CAC/C,iCAAiC,6FACjC,iNAAiBG,SAAS,OAATA,SAAS,CAAQQ,IAAI,OAAVF,IAAI,CAAUL,eAAe,OAAfA,eAAe,CAAEC,gBAAgB,OAAhBA,gBAAgB,CAASC,GAAG,OAAVC,KAAK,yCAE3DD,IAAG,CAACM,mBAAmB,CAACT,SAAS,CAAEQ,IAAI,CAAC,QAArDF,IAAI,iDACHJ,gBAAgB,CAACI,IAAI,CAAC,8FAGtBL,eAAe,cAAO,uEAEhC,qEACF,CAGD,GAAMS,aAAY,CAAG,CACnBJ,IAAI,CAAE,CAAC,CAAC,CACRK,OAAO,CAAE,IAAI,CACbC,KAAK,CAAE,IACT,CAAC,CAED,GAAMC,mBAAkB,CAAGjB,WAAW,CAAC,CACrCkB,IAAI,CAAE,eAAe,CACrBJ,YAAY,CAAZA,YAAY,CACZK,QAAQ,CAAE,CACRC,eAAe,CAAE,yBAACC,KAAK,CAAEC,MAAM,CAAK,CAClCD,KAAK,CAACX,IAAI,CAAGY,MAAM,CAACC,OAAO,CAC7B,CACF,CAAC,CACDC,aAAa,CAAE,uBAACC,OAAO,CAAK,CAC1BA,OAAO,CACJC,OAAO,CAACvB,kBAAkB,CAACwB,OAAO,CAAE,SAACN,KAAK,CAAEC,MAAM,CAAK,CACtDD,KAAK,CAACN,OAAO,CAAG,IAAI,CACpBM,KAAK,CAACL,KAAK,CAAG,IAAI,CACpB,CAAC,CAAC,CACDU,OAAO,CAACvB,kBAAkB,CAACyB,SAAS,CAAE,SAACP,KAAK,CAAEC,MAAM,CAAK,CACxDD,KAAK,CAACX,IAAI,CAAGY,MAAM,CAACC,OAAO,CAC3BF,KAAK,CAACN,OAAO,CAAG,KAAK,CACvB,CAAC,CAAC,CACDW,OAAO,CAACf,iBAAiB,CAACiB,SAAS,CAAE,SAACP,KAAK,CAAEC,MAAM,CAAK,CACvDD,KAAK,CAACX,IAAI,CAAGY,MAAM,CAACC,OAAO,CAC3BF,KAAK,CAACN,OAAO,CAAG,KAAK,CACvB,CAAC,CAAC,CACDc,UAAU,CAAC3B,OAAO,CAAE,SAACmB,KAAK,CAAEC,MAAM,CAAK,CACtCD,KAAK,CAACL,KAAK,CAAGM,MAAM,CAACC,OAAO,CAC5BF,KAAK,CAACN,OAAO,CAAG,KAAK,CACvB,CAAC,CAAC,CACN,CACF,CAAC,CAAC,CAEK,GAAQK,gBAAe,CAAKH,kBAAkB,CAACa,OAAO,CAA9CV,eAAe,CAAgC,wBAC9D,cAAeH,mBAAkB,CAACc,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}