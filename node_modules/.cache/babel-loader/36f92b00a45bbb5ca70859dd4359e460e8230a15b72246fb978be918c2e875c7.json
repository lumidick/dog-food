{"ast":null,"code":"var _jsxFileName = \"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/src/pages/Product/ProductPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Spin } from 'antd';\nimport api from '../../utils/api';\nimport Product from '../../components/Product/Product';\nimport { useParams, useNavigate, Navigate } from 'react-router-dom';\nimport { UserContext } from '../../context/userContext';\nimport { LoadingContext } from '../../context/loadingContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProductPage = () => {\n  _s();\n  const [product, setProduct] = useState({});\n  const [error, setError] = useState(false);\n  const {\n    productId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    handleProductLike\n  } = useContext(UserContext);\n  const {\n    isLoading,\n    changeIsLoading\n  } = useContext(LoadingContext);\n  const onProductLike = () => {\n    handleProductLike(productId, product.likes).then(updateProduct => setProduct(updateProduct));\n  };\n  useEffect(() => {\n    changeIsLoading(true);\n    api.getProductInfo(productId).then(data => setProduct(data)).catch(() => setError(true)).finally(() => changeIsLoading(false));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      onClick: () => navigate(-1),\n      children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 20\n    }, this) : error ? /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 39\n    }, this) : /*#__PURE__*/_jsxDEV(Product, {\n      ...product,\n      handleProductLike: onProductLike\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 70\n    }, this)]\n  }, void 0, true);\n};\n_s(ProductPage, \"8VR+AaBPyndFk1TrSTJxwaVY/Bc=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ProductPage;\nexport default ProductPage;\nvar _c;\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"names":["React","useEffect","useState","useContext","Spin","api","Product","useParams","useNavigate","Navigate","UserContext","LoadingContext","ProductPage","product","setProduct","error","setError","productId","navigate","handleProductLike","isLoading","changeIsLoading","onProductLike","likes","then","updateProduct","getProductInfo","data","catch","finally"],"sources":["/home/titus/Рабочий стол/dog-food/src/pages/Product/ProductPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { Spin } from 'antd';\nimport api from '../../utils/api';\nimport Product from '../../components/Product/Product';\nimport { useParams, useNavigate, Navigate } from 'react-router-dom';\n\nimport { UserContext } from '../../context/userContext';\nimport { LoadingContext } from '../../context/loadingContext';\n\nconst ProductPage = () => {\n  const [product, setProduct] = useState({});\n  const [error, setError] = useState(false);\n  const { productId } = useParams();\n  const navigate = useNavigate();\n  const { handleProductLike } = useContext(UserContext);\n  const { isLoading, changeIsLoading } = useContext(LoadingContext);\n\n  const onProductLike = () => {\n    handleProductLike(productId, product.likes).then((updateProduct) => setProduct(updateProduct));\n  };\n\n  useEffect(() => {\n    changeIsLoading(true);\n    api\n      .getProductInfo(productId)\n      .then((data) => setProduct(data))\n      .catch(() => setError(true))\n      .finally(() => changeIsLoading(false));\n  }, []);\n\n  return (\n    <>\n      <h3 onClick={() => navigate(-1)}>Назад</h3>\n      {isLoading ? <Spin /> : error ? <Navigate to=\"/\"></Navigate> : <Product {...product} handleProductLike={onProductLike}></Product>}\n    </>\n  );\n};\n\nexport default ProductPage;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAC9D,SAASC,IAAI,QAAQ,MAAM;AAC3B,OAAOC,GAAG,MAAM,iBAAiB;AACjC,OAAOC,OAAO,MAAM,kCAAkC;AACtD,SAASC,SAAS,EAAEC,WAAW,EAAEC,QAAQ,QAAQ,kBAAkB;AAEnE,SAASC,WAAW,QAAQ,2BAA2B;AACvD,SAASC,cAAc,QAAQ,8BAA8B;AAAC;AAAA;AAE9D,MAAMC,WAAW,GAAG,MAAM;EAAA;EACxB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EACzC,MAAM;IAAEe;EAAU,CAAC,GAAGV,SAAS,EAAE;EACjC,MAAMW,QAAQ,GAAGV,WAAW,EAAE;EAC9B,MAAM;IAAEW;EAAkB,CAAC,GAAGhB,UAAU,CAACO,WAAW,CAAC;EACrD,MAAM;IAAEU,SAAS;IAAEC;EAAgB,CAAC,GAAGlB,UAAU,CAACQ,cAAc,CAAC;EAEjE,MAAMW,aAAa,GAAG,MAAM;IAC1BH,iBAAiB,CAACF,SAAS,EAAEJ,OAAO,CAACU,KAAK,CAAC,CAACC,IAAI,CAAEC,aAAa,IAAKX,UAAU,CAACW,aAAa,CAAC,CAAC;EAChG,CAAC;EAEDxB,SAAS,CAAC,MAAM;IACdoB,eAAe,CAAC,IAAI,CAAC;IACrBhB,GAAG,CACAqB,cAAc,CAACT,SAAS,CAAC,CACzBO,IAAI,CAAEG,IAAI,IAAKb,UAAU,CAACa,IAAI,CAAC,CAAC,CAChCC,KAAK,CAAC,MAAMZ,QAAQ,CAAC,IAAI,CAAC,CAAC,CAC3Ba,OAAO,CAAC,MAAMR,eAAe,CAAC,KAAK,CAAC,CAAC;EAC1C,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE;IAAA,wBACE;MAAI,OAAO,EAAE,MAAMH,QAAQ,CAAC,CAAC,CAAC,CAAE;MAAA,UAAC;IAAK;MAAA;MAAA;MAAA;IAAA,QAAK,EAC1CE,SAAS,gBAAG,QAAC,IAAI;MAAA;MAAA;MAAA;IAAA,QAAG,GAAGL,KAAK,gBAAG,QAAC,QAAQ;MAAC,EAAE,EAAC;IAAG;MAAA;MAAA;MAAA;IAAA,QAAY,gBAAG,QAAC,OAAO;MAAA,GAAKF,OAAO;MAAE,iBAAiB,EAAES;IAAc;MAAA;MAAA;MAAA;IAAA,QAAW;EAAA,gBAChI;AAEP,CAAC;AAAC,GA3BIV,WAAW;EAAA,QAGOL,SAAS,EACdC,WAAW;AAAA;AAAA,KAJxBI,WAAW;AA6BjB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}