{"ast":null,"code":"import _objectSpread from\"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useCallback,version}from'react';import Footer from'../Footer/footer';import Header from'../Header/header';import Logo from'../Logo/logo';import Search from'../Search/search';import'./index.css';// import data from '../../assets/data.json';\nimport SeachInfo from'../SeachInfo';import api from'../../utils/api';import useDebounce from'../../hooks/useDebounce';import{CatalogPage}from'../../pages/CatalogPage/catalog-page';import{ProductPage}from'../../pages/ProductPage/product-page';import{Route,Routes,useLocation,useNavigate}from'react-router-dom';import{NotFoundPage}from'../../pages/NotFoundPage/not-found-page';import{FaqPage}from'../../pages/FAQPage/faq-page';import{FavoritePage}from'../../pages/FavoritePage/favorite-page';import Modal from'../Modal/modal';import{Register}from'../Register/register';import{Login}from'../Login/login';import{ResetPassword}from'../ResetPassword/reset-password';import{HomePage}from'../../pages/HomePage/home-page';import{useDispatch}from'react-redux';import{fetchProducts}from'../../storage/products/productsSlice';import{fetchUser}from'../../storage/user/userSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _location$state,_location$state2;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cards=_useState2[0],setCards=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var debounceSearchQuery=useDebounce(searchQuery,300);var dispatch=useDispatch();var location=useLocation();var backgroundLocation=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.backgroundLocation;var initialPath=(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.initialPath;var navigate=useNavigate();var handleRequest=useCallback(function(){setIsLoading(true);api.search(searchQuery).then(function(searchResult){setCards(searchResult);}).catch(function(err){return console.log(err);}).finally(function(){setIsLoading(false);});},[searchQuery]);useEffect(function(){var userData=dispatch(fetchUser());userData.then(function(){dispatch(fetchProducts());});},[dispatch]);useEffect(function(){handleRequest();},[debounceSearchQuery]);var handleFormSubmit=function handleFormSubmit(inputText){navigate('/');setSearchQuery(inputText);handleRequest();};var handleInputChange=function handleInputChange(inputValue){setSearchQuery(inputValue);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Logo,{className:\"logo logo_place_header\",href:\"/\"}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/catalog\",element:/*#__PURE__*/_jsx(Search,{onSubmit:handleFormSubmit,onInput:handleInputChange})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(_Fragment,{})})]})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"content\",children:[/*#__PURE__*/_jsx(SeachInfo,{searchText:searchQuery}),/*#__PURE__*/_jsxs(Routes,{location:backgroundLocation&&_objectSpread(_objectSpread({},backgroundLocation),{},{pathname:initialPath})||location,children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/catalog\",element:/*#__PURE__*/_jsx(CatalogPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/product/:productId\",element:/*#__PURE__*/_jsx(ProductPage,{isLoading:isLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/faq\",element:/*#__PURE__*/_jsx(FaqPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/favorites\",element:/*#__PURE__*/_jsx(FavoritePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reset-password\",element:/*#__PURE__*/_jsx(ResetPassword,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFoundPage,{})})]}),backgroundLocation&&/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsx(Login,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsx(Register,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/reset-password\",element:/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsx(ResetPassword,{})})})]})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default App;","map":{"version":3,"names":["useState","useEffect","useCallback","version","Footer","Header","Logo","Search","SeachInfo","api","useDebounce","CatalogPage","ProductPage","Route","Routes","useLocation","useNavigate","NotFoundPage","FaqPage","FavoritePage","Modal","Register","Login","ResetPassword","HomePage","useDispatch","fetchProducts","fetchUser","App","cards","setCards","searchQuery","setSearchQuery","isLoading","setIsLoading","debounceSearchQuery","dispatch","location","backgroundLocation","state","initialPath","navigate","handleRequest","search","then","searchResult","catch","err","console","log","finally","userData","handleFormSubmit","inputText","handleInputChange","inputValue","pathname"],"sources":["/home/titus/Рабочий стол/dog-food/src/components/App/app.jsx"],"sourcesContent":["import { useState, useEffect, useCallback, version } from 'react';\nimport Footer from '../Footer/footer';\nimport Header from '../Header/header';\nimport Logo from '../Logo/logo';\nimport Search from '../Search/search';\nimport './index.css';\n// import data from '../../assets/data.json';\nimport SeachInfo from '../SeachInfo';\nimport api from '../../utils/api';\nimport useDebounce from '../../hooks/useDebounce';\nimport { CatalogPage } from '../../pages/CatalogPage/catalog-page';\nimport { ProductPage } from '../../pages/ProductPage/product-page';\nimport { Route, Routes, useLocation, useNavigate } from 'react-router-dom';\nimport { NotFoundPage } from '../../pages/NotFoundPage/not-found-page';\nimport { FaqPage } from '../../pages/FAQPage/faq-page';\nimport { FavoritePage } from '../../pages/FavoritePage/favorite-page';\nimport Modal from '../Modal/modal';\nimport { Register } from '../Register/register';\nimport { Login } from '../Login/login';\nimport { ResetPassword } from '../ResetPassword/reset-password';\nimport { HomePage } from '../../pages/HomePage/home-page';\nimport { useDispatch } from 'react-redux';\nimport { fetchProducts } from '../../storage/products/productsSlice';\nimport { fetchUser } from '../../storage/user/userSlice';\n\n\nfunction App() {\n  const [cards, setCards] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const debounceSearchQuery = useDebounce(searchQuery, 300);\n  const dispatch = useDispatch();\n  const location = useLocation()\n\n  const backgroundLocation = location.state?.backgroundLocation;\n  const initialPath = location.state?.initialPath;\n\n  const navigate = useNavigate()\n  const handleRequest = useCallback(() => {\n    setIsLoading(true);\n    api.search(searchQuery)\n      .then((searchResult) => {\n        setCards(searchResult)\n      })\n      .catch(err => console.log(err))\n      .finally(() => {\n        setIsLoading(false);\n      })\n  }, [searchQuery])\n\n  useEffect(() => {\n    const userData = dispatch(fetchUser());\n    userData.then(() => {\n      dispatch(fetchProducts());\n    })\n  }, [dispatch])\n\n  useEffect(() => {\n    handleRequest()\n  }, [debounceSearchQuery])\n\n  const handleFormSubmit = (inputText) => {\n    navigate('/');\n    setSearchQuery(inputText);\n    handleRequest();\n  }\n\n  const handleInputChange = (inputValue) => {\n    setSearchQuery(inputValue);\n  }\n\n  return (\n    <>\n      <Header>\n        <>\n          <Logo className=\"logo logo_place_header\" href=\"/\" />\n          <Routes>\n            <Route path='/catalog' element={\n              <Search\n                onSubmit={handleFormSubmit}\n                onInput={handleInputChange}\n              />\n            } />\n            <Route path='*'\n              element={<></>}\n            />\n          </Routes>\n        </>\n      </Header>\n      <main className='content'>\n        <SeachInfo searchText={searchQuery} />\n        <Routes location={(backgroundLocation && { ...backgroundLocation, pathname: initialPath }) || location}>\n          <Route index element={\n            <HomePage />\n          } />\n          <Route path='/catalog' element={\n            <CatalogPage />\n          } />\n          <Route path='/product/:productId' element={\n            <ProductPage\n              isLoading={isLoading}\n            />\n          } />\n          <Route path='/faq' element={<FaqPage />} />\n          <Route path='/favorites' element={\n            <FavoritePage />\n          } />\n          <Route path='/login' element={\n            <Login />\n          } />\n          <Route path='/register' element={\n            <Register />\n          } />\n          <Route path='/reset-password' element={\n            <ResetPassword />\n          } />\n          <Route path='*' element={<NotFoundPage />} />\n        </Routes>\n\n        {backgroundLocation && (\n          <Routes>\n            <Route path='/login' element={\n              <Modal>\n                <Login />\n              </Modal>\n            } />\n\n            <Route path='/register' element={\n              <Modal>\n                <Register />\n              </Modal>\n            } />\n            <Route path='/reset-password' element={\n              <Modal>\n                <ResetPassword />\n              </Modal>\n            } />\n          </Routes>\n        )}\n\n      </main>\n      <Footer />\n    </>\n  )\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}