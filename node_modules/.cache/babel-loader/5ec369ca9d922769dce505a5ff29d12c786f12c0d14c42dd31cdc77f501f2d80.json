{"ast":null,"code":"import _defineProperty from\"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import cn from'classnames';import{useCallback}from'react';import{Link}from'react-router-dom';import{calcDiscountPrice,isLiked}from'../../utils/product';import ContentLoader from\"react-content-loader\";import\"./index.css\";import{ReactComponent as Save}from\"./save.svg\";import{useDispatch,useSelector}from'react-redux';import{fetchChangeLikeProduct}from'../../storage/products/productsSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Card=function Card(_ref){var name=_ref.name,price=_ref.price,_id=_ref._id,likes=_ref.likes,discount=_ref.discount,wight=_ref.wight,description=_ref.description,pictures=_ref.pictures,tags=_ref.tags;var dispatch=useDispatch();var currentUser=useSelector(function(state){return state.user.data;});var isLoading=useSelector(function(state){return state.user.loading;});var handleLikeClick=useCallback(function(){return dispatch(fetchChangeLikeProduct({_id:_id,likes:likes}));},[dispatch,_id,likes]);var discount_price=calcDiscountPrice(price,discount);var liked=isLiked(likes,currentUser===null||currentUser===void 0?void 0:currentUser._id);return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsxs(ContentLoader,{speed:2,width:186,height:385,viewBox:\"0 0 186 385\",backgroundColor:\"#f3f3f3\",foregroundColor:\"#ecebeb\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M 0 0 h 185.6 v 187 H 0 z M 0 203 h 186 v 14 H 0 z M 0 233 h 186 v 56 H 0 z M 0 305 h 186 v 24 H 0 z\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"0\",y:\"345\",rx:\"20\",ry:\"20\",width:\"121\",height:\"40\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card__sticky card__sticky_type_top-left\",children:[discount!==0&&/*#__PURE__*/_jsx(\"span\",{className:\"card__discount\",children:\"-\".concat(discount,\"%\")}),tags&&tags.map(function(tag){return/*#__PURE__*/_jsx(\"span\",{className:cn('tag',_defineProperty({},\"tag_type_\".concat(tag),true)),children:tag},tag);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card__sticky card__sticky_type_top-right\",children:/*#__PURE__*/_jsx(\"button\",{className:cn('card__favorite',{'card__favorite_is-active':liked}),onClick:handleLikeClick,children:/*#__PURE__*/_jsx(Save,{className:\"card__favorite-icon\"})})}),/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(_id),className:\"card__link\",children:[/*#__PURE__*/_jsx(\"img\",{src:pictures,alt:description,className:\"card__image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__desc\",children:[/*#__PURE__*/_jsxs(\"span\",{className:discount!==0?\"card__old-price\":\"card__price\",children:[price,\"\\xA0\\u20BD\"]}),discount!==0&&/*#__PURE__*/_jsxs(\"span\",{className:\"card__price card__price_type_discount\",children:[discount_price,\"\\xA0\\u20BD\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"card__wight\",children:wight}),/*#__PURE__*/_jsx(\"p\",{className:\"card__name\",children:name})]})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"card__cart btn btn_type_primary\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})});};export default Card;","map":{"version":3,"names":["cn","useCallback","Link","calcDiscountPrice","isLiked","ContentLoader","ReactComponent","Save","useDispatch","useSelector","fetchChangeLikeProduct","Card","name","price","_id","likes","discount","wight","description","pictures","tags","dispatch","currentUser","state","user","data","isLoading","loading","handleLikeClick","discount_price","liked","map","tag"],"sources":["/home/titus/Рабочий стол/dog-food/src/components/Card/card.jsx"],"sourcesContent":["import cn from 'classnames';\nimport { useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { calcDiscountPrice, isLiked } from '../../utils/product';\nimport ContentLoader from \"react-content-loader\";\n\nimport \"./index.css\";\nimport {ReactComponent as Save} from \"./save.svg\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchChangeLikeProduct } from '../../storage/products/productsSlice';\n\n\nconst Card = ({ name, price, _id, likes, discount, wight, description, pictures, tags }) => {\n\tconst dispatch = useDispatch();\n\tconst currentUser = useSelector(state => state.user.data);\n\tconst isLoading = useSelector(state => state.user.loading);\n\n\tconst handleLikeClick = useCallback(() => {\n\t\treturn dispatch(fetchChangeLikeProduct({_id, likes}))\n\t  }, [dispatch, _id, likes])\n\n\t  \n\tconst discount_price = calcDiscountPrice(price, discount);\n\tconst liked = isLiked(likes, currentUser?._id)\n\n\n\treturn (\n\t\t<>\n\t\t\t{ isLoading \n\t\t\t\t?\t<ContentLoader \n\t\t\t\t\t\tspeed={2}\n\t\t\t\t\t\twidth={186}\n\t\t\t\t\t\theight={385}\n\t\t\t\t\t\tviewBox=\"0 0 186 385\"\n\t\t\t\t\t\tbackgroundColor=\"#f3f3f3\"\n\t\t\t\t\t\tforegroundColor=\"#ecebeb\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path d=\"M 0 0 h 185.6 v 187 H 0 z M 0 203 h 186 v 14 H 0 z M 0 233 h 186 v 56 H 0 z M 0 305 h 186 v 24 H 0 z\" /> \n\t\t\t\t\t\t<rect x=\"0\" y=\"345\" rx=\"20\" ry=\"20\" width=\"121\" height=\"40\" />\n\t\t\t\t\t</ContentLoader>\n\t\t\t\t:\t<div className=\"card\">\n\t\t\t\t\t\t<div className=\"card__sticky card__sticky_type_top-left\">\n\t\t\t\t\t\t\t{discount !== 0 && <span className=\"card__discount\">{`-${discount}%`}</span>}\n\t\t\t\t\t\t\t{tags && tags.map(tag => <span key={tag} className={cn('tag', {[`tag_type_${tag}`]: true}, )}>{tag}</span>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"card__sticky card__sticky_type_top-right\">\n\t\t\t\t\t\t\t<button className={cn('card__favorite', {'card__favorite_is-active': liked})} onClick={handleLikeClick}>\n\t\t\t\t\t\t\t\t<Save className=\"card__favorite-icon\"/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Link to={`/product/${_id}`} className=\"card__link\">\n\t\t\t\t\t\t\t<img src={pictures} alt={description} className=\"card__image\" />\n\t\t\t\t\t\t\t<div className=\"card__desc\">\n\t\t\t\t\t\t\t\t<span className={discount !== 0 ? \"card__old-price\" : \"card__price\"}>\n\t\t\t\t\t\t\t\t\t{price}&nbsp;₽\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{discount !== 0 && <span className=\"card__price card__price_type_discount\">\n\t\t\t\t\t\t\t\t\t{discount_price}&nbsp;₽\n\t\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t\t<span className=\"card__wight\">{wight}</span>\n\t\t\t\t\t\t\t\t<p className=\"card__name\">{name}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<a href=\"#\" className=\"card__cart btn btn_type_primary\">\n\t\t\t\t\t\t\tДобавить в корзину\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\t);\n};\n\nexport default Card;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}