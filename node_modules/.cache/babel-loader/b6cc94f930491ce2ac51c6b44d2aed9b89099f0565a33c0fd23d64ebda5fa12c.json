{"ast":null,"code":"var _jsxFileName = \"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/src/components/FormReview/form-review.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { fetchCreateReview } from \"../../storage/singleProduct/singleProductSlice\";\nimport { INITIAL_VALUE_RATING, VALIDATE_CONFIG } from \"../../utils/contants\";\nimport Form from \"../Form/form\";\nimport { FormButton } from \"../FormButton/form-button\";\nimport { FormInput } from \"../FormInput/form-input\";\nimport { Rating } from \"../Rating/rating\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FormReview = _ref => {\n  _s();\n  var _errors$email;\n  let {\n    title = 'Отзыв о товаре',\n    productId,\n    setProduct\n  } = _ref;\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    reset\n  } = useForm({\n    mode: \"onBlur\"\n  });\n  const [rating, setRating] = useState(INITIAL_VALUE_RATING);\n  const dispatch = useDispatch();\n  const sendReviewProduct = data => {\n    dispatch(fetchCreateReview({\n      productId,\n      data\n    })).then(() => {\n      reset();\n      setRating(INITIAL_VALUE_RATING);\n    });\n  };\n  const textReview = register('text', {\n    required: {\n      value: true,\n      message: VALIDATE_CONFIG.requiredMessage\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(Form, {\n    title: title,\n    handleFormSubmit: handleSubmit(sendReviewProduct),\n    children: [/*#__PURE__*/_jsxDEV(Rating, {\n      rating: rating,\n      isEditable: true,\n      setRating: setRating\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n      ...textReview,\n      id: \"text\",\n      typeinput: \"textarea\",\n      placeholder: \"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043A\\u0441\\u0442 \\u043E\\u0442\\u0437\\u044B\\u0432\\u044B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this), (errors === null || errors === void 0 ? void 0 : errors.email) && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"errorMessage\",\n      children: errors === null || errors === void 0 ? void 0 : (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 31\n    }, this), /*#__PURE__*/_jsxDEV(FormButton, {\n      type: \"submit\",\n      color: \"yellow\",\n      children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 9\n  }, this);\n};\n_s(FormReview, \"LaGhoFo6JYz5efv15FRLijZOYb4=\", false, function () {\n  return [useForm, useDispatch];\n});\n_c = FormReview;\nvar _c;\n$RefreshReg$(_c, \"FormReview\");","map":{"version":3,"names":["useState","useForm","useDispatch","fetchCreateReview","INITIAL_VALUE_RATING","VALIDATE_CONFIG","Form","FormButton","FormInput","Rating","FormReview","title","productId","setProduct","register","handleSubmit","formState","errors","reset","mode","rating","setRating","dispatch","sendReviewProduct","data","then","textReview","required","value","message","requiredMessage","email"],"sources":["/home/titus/Рабочий стол/dog-food/src/components/FormReview/form-review.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { fetchCreateReview } from \"../../storage/singleProduct/singleProductSlice\";\nimport { INITIAL_VALUE_RATING, VALIDATE_CONFIG } from \"../../utils/contants\";\nimport Form from \"../Form/form\";\nimport { FormButton } from \"../FormButton/form-button\";\nimport { FormInput } from \"../FormInput/form-input\";\nimport { Rating } from \"../Rating/rating\";\n\nexport const FormReview = ({title = 'Отзыв о товаре', productId, setProduct}) => {\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({ mode: \"onBlur\" })\n    const [rating, setRating] = useState(INITIAL_VALUE_RATING)\n    const dispatch = useDispatch();\n\n    const sendReviewProduct = (data) => {\n        dispatch(fetchCreateReview({productId, data}))\n            .then(()=> {\n                reset();\n                setRating(INITIAL_VALUE_RATING)\n            })\n    }\n \n    const textReview = register('text', {\n        required: {\n            value: true,\n            message: VALIDATE_CONFIG.requiredMessage\n        }\n    })\n\n    return (\n        <Form title={title} handleFormSubmit={handleSubmit(sendReviewProduct)}>\n            \n            <Rating rating={rating} isEditable setRating={setRating} />\n\n            <FormInput\n                {...textReview}\n                id=\"text\"\n                typeinput=\"textarea\"\n                placeholder=\"Напишите текст отзывы\"\n            />\n            {errors?.email && <p className='errorMessage'>{errors?.email?.message}</p>}\n\n            <FormButton type=\"submit\" color=\"yellow\">Отправить отзыв</FormButton>\n        </Form>\n    )\n}"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,OAAO,QAAQ,iBAAiB;AACzC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,iBAAiB,QAAQ,gDAAgD;AAClF,SAASC,oBAAoB,EAAEC,eAAe,QAAQ,sBAAsB;AAC5E,OAAOC,IAAI,MAAM,cAAc;AAC/B,SAASC,UAAU,QAAQ,2BAA2B;AACtD,SAASC,SAAS,QAAQ,yBAAyB;AACnD,SAASC,MAAM,QAAQ,kBAAkB;AAAC;AAE1C,OAAO,MAAMC,UAAU,GAAG,QAAuD;EAAA;EAAA;EAAA,IAAtD;IAACC,KAAK,GAAG,gBAAgB;IAAEC,SAAS;IAAEC;EAAU,CAAC;EACxE,MAAM;IAAEC,QAAQ;IAAEC,YAAY;IAAEC,SAAS,EAAE;MAAEC;IAAO,CAAC;IAAEC;EAAM,CAAC,GAAGjB,OAAO,CAAC;IAAEkB,IAAI,EAAE;EAAS,CAAC,CAAC;EAC5F,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGrB,QAAQ,CAACI,oBAAoB,CAAC;EAC1D,MAAMkB,QAAQ,GAAGpB,WAAW,EAAE;EAE9B,MAAMqB,iBAAiB,GAAIC,IAAI,IAAK;IAChCF,QAAQ,CAACnB,iBAAiB,CAAC;MAACS,SAAS;MAAEY;IAAI,CAAC,CAAC,CAAC,CACzCC,IAAI,CAAC,MAAK;MACPP,KAAK,EAAE;MACPG,SAAS,CAACjB,oBAAoB,CAAC;IACnC,CAAC,CAAC;EACV,CAAC;EAED,MAAMsB,UAAU,GAAGZ,QAAQ,CAAC,MAAM,EAAE;IAChCa,QAAQ,EAAE;MACNC,KAAK,EAAE,IAAI;MACXC,OAAO,EAAExB,eAAe,CAACyB;IAC7B;EACJ,CAAC,CAAC;EAEF,oBACI,QAAC,IAAI;IAAC,KAAK,EAAEnB,KAAM;IAAC,gBAAgB,EAAEI,YAAY,CAACQ,iBAAiB,CAAE;IAAA,wBAElE,QAAC,MAAM;MAAC,MAAM,EAAEH,MAAO;MAAC,UAAU;MAAC,SAAS,EAAEC;IAAU;MAAA;MAAA;MAAA;IAAA,QAAG,eAE3D,QAAC,SAAS;MAAA,GACFK,UAAU;MACd,EAAE,EAAC,MAAM;MACT,SAAS,EAAC,UAAU;MACpB,WAAW,EAAC;IAAuB;MAAA;MAAA;MAAA;IAAA,QACrC,EACD,CAAAT,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEc,KAAK,kBAAI;MAAG,SAAS,EAAC,cAAc;MAAA,UAAEd,MAAM,aAANA,MAAM,wCAANA,MAAM,CAAEc,KAAK,kDAAb,cAAeF;IAAO;MAAA;MAAA;MAAA;IAAA,QAAK,eAE1E,QAAC,UAAU;MAAC,IAAI,EAAC,QAAQ;MAAC,KAAK,EAAC,QAAQ;MAAA,UAAC;IAAe;MAAA;MAAA;MAAA;IAAA,QAAa;EAAA;IAAA;IAAA;IAAA;EAAA,QAClE;AAEf,CAAC;AAAA,GApCYnB,UAAU;EAAA,QAC8CT,OAAO,EAEvDC,WAAW;AAAA;AAAA,KAHnBQ,UAAU;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}