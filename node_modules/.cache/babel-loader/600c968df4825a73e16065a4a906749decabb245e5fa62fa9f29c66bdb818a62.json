{"ast":null,"code":"var _jsxFileName = \"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/src/components/App/App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Spin } from 'antd';\nimport Header from '../Header/Header';\nimport Logo from '../Logo/Logo';\nimport Search from '../Search/Search';\nimport CardList from '../CardList/CardList';\nimport useDebounce from '../../hooks/useDebounce';\nimport api from '../../utils/api';\nimport isLike from '../../utils/utils';\nimport s from './style.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [cards, setCards] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState({});\n  const [searchQuery, setSearchQuery] = useState('');\n  const debounceValue = useDebounce(searchQuery, 1000);\n  const onChange = text => setSearchQuery(text);\n  const handleRequest = () => {\n    setIsLoading(true);\n    api.search(debounceValue).then(data => setCards(data)).finally(() => setIsLoading(false));\n  };\n  const handleUpdateUser = updateUser => {\n    api.updateUserInfo(updateUser).then(newUser => setUser(newUser));\n  };\n  useEffect(() => {\n    handleRequest();\n  }, [debounceValue]);\n  useEffect(() => {\n    Promise.all([api.getUserInfo(), api.getAllProducts()]).then(_ref => {\n      let [userData, productsData] = _ref;\n      setUser(userData);\n      setCards(productsData.products);\n      setIsLoading(false);\n    });\n  }, []);\n  const handleProductLike = (productId, productLikes) => {\n    const isLiked = isLike(productLikes, user._id);\n    api.changeLikeStatus(productId, isLiked).then(updateProduct => {\n      const updateCards = cards.map(card => card._id === updateProduct._id ? updateProduct : card);\n      setCards(updateCards);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      user: user,\n      handleUpdateUser: handleUpdateUser,\n      children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Search, {\n        onChange: onChange,\n        onButtonSearchClick: handleRequest\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.container,\n      children: isLoading ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 49\n      }, this) : /*#__PURE__*/_jsxDEV(CardList, {\n        userId: user === null || user === void 0 ? void 0 : user._id,\n        handleProductLike: handleProductLike,\n        cards: cards\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 65\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"YDdmtBNYGCEZm8OAvIxoT2HEjMs=\", false, function () {\n  return [useDebounce];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Spin","Header","Logo","Search","CardList","useDebounce","api","isLike","s","App","cards","setCards","isLoading","setIsLoading","user","setUser","searchQuery","setSearchQuery","debounceValue","onChange","text","handleRequest","search","then","data","finally","handleUpdateUser","updateUser","updateUserInfo","newUser","Promise","all","getUserInfo","getAllProducts","userData","productsData","products","handleProductLike","productId","productLikes","isLiked","_id","changeLikeStatus","updateProduct","updateCards","map","card","container"],"sources":["/home/titus/Рабочий стол/dog-food/src/components/App/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Spin } from 'antd';\nimport Header from '../Header/Header';\nimport Logo from '../Logo/Logo';\nimport Search from '../Search/Search';\nimport CardList from '../CardList/CardList';\nimport useDebounce from '../../hooks/useDebounce';\nimport api from '../../utils/api';\nimport isLike from '../../utils/utils';\n\nimport s from './style.module.css';\n\nfunction App() {\n  const [cards, setCards] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState({});\n  const [searchQuery, setSearchQuery] = useState('');\n  const debounceValue = useDebounce(searchQuery, 1000);\n\n  const onChange = (text) => setSearchQuery(text);\n\n  const handleRequest = () => {\n    setIsLoading(true);\n    api\n      .search(debounceValue)\n      .then((data) => setCards(data))\n      .finally(() => setIsLoading(false));\n  };\n\n  const handleUpdateUser = (updateUser) => {\n    api.updateUserInfo(updateUser).then((newUser) => setUser(newUser));\n  };\n\n  useEffect(() => {\n    handleRequest();\n  }, [debounceValue]);\n\n  useEffect(() => {\n    Promise.all([api.getUserInfo(), api.getAllProducts()]).then(([userData, productsData]) => {\n      setUser(userData);\n      setCards(productsData.products);\n      setIsLoading(false);\n    });\n  }, []);\n\n  const handleProductLike = (productId, productLikes) => {\n    const isLiked = isLike(productLikes, user._id);\n    api.changeLikeStatus(productId, isLiked).then((updateProduct) => {\n      const updateCards = cards.map((card) => (card._id === updateProduct._id ? updateProduct : card));\n      setCards(updateCards);\n    });\n  };\n\n  return (\n    <>\n      <Header user={user} handleUpdateUser={handleUpdateUser}>\n        <Logo />\n        <Search onChange={onChange} onButtonSearchClick={handleRequest} />\n      </Header>\n      <div className={s.container}>{isLoading ? <Spin></Spin> : <CardList userId={user?._id} handleProductLike={handleProductLike} cards={cards}></CardList>}</div>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}