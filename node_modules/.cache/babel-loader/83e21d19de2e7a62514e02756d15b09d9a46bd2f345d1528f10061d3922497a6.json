{"ast":null,"code":"var _jsxFileName = \"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/src/pages/Product/ProductPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useCallback } from 'react';\nimport { useParams, Navigate } from 'react-router-dom';\nimport { Spin } from 'antd';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport Product from '../../components/Product/Product';\nimport api from '../../utils/api';\nimport useApi from '../../hooks/useAPI';\nimport { UserContext } from '../../context/userContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProductPage = () => {\n  _s();\n  const {\n    productId\n  } = useParams();\n  const {\n    handleProductLike\n  } = useContext(UserContext);\n  const getProductInfo = useCallback(() => api.getProductInfo(productId), [productId]);\n  const {\n    data: product,\n    setData: setProduct,\n    loading,\n    error\n  } = useApi(getProductInfo);\n  const onProductLike = () => {\n    handleProductLike(productId, product.likes).then(updateProduct => setProduct(updateProduct));\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      title: product === null || product === void 0 ? void 0 : product.name,\n      buttonText: \"\\u041D\\u0430\\u0437\\u0430\\u0434\",\n      link: '/catalog'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 18\n    }, this) : error ? /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 37\n    }, this) : /*#__PURE__*/_jsxDEV(Product, {\n      ...product,\n      handleProductLike: onProductLike\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 68\n    }, this)]\n  }, void 0, true);\n};\n_s(ProductPage, \"iHtpcEGEvc8z7AWbaY8dbeRLDxs=\", false, function () {\n  return [useParams, useApi];\n});\n_c = ProductPage;\nexport default ProductPage;\nvar _c;\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"names":["React","useContext","useCallback","useParams","Navigate","Spin","PageHeader","Product","api","useApi","UserContext","ProductPage","productId","handleProductLike","getProductInfo","data","product","setData","setProduct","loading","error","onProductLike","likes","then","updateProduct","name"],"sources":["/home/titus/Рабочий стол/dog-food/src/pages/Product/ProductPage.jsx"],"sourcesContent":["import React, { useContext, useCallback } from 'react';\nimport { useParams, Navigate } from 'react-router-dom';\nimport { Spin } from 'antd';\n\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport Product from '../../components/Product/Product';\n\nimport api from '../../utils/api';\nimport useApi from '../../hooks/useAPI';\nimport { UserContext } from '../../context/userContext';\n\nconst ProductPage = () => {\n  const { productId } = useParams();\n  const { handleProductLike } = useContext(UserContext);\n\n  const getProductInfo = useCallback(() => api.getProductInfo(productId), [productId]);\n  const { data: product, setData: setProduct, loading, error } = useApi(getProductInfo);\n\n  const onProductLike = () => {\n    handleProductLike(productId, product.likes).then((updateProduct) => setProduct(updateProduct));\n  };\n\n  return (\n    <>\n      <PageHeader title={product?.name} buttonText=\"Назад\" link={'/catalog'}></PageHeader>\n      {loading ? <Spin /> : error ? <Navigate to=\"/\"></Navigate> : <Product {...product} handleProductLike={onProductLike}></Product>}\n    </>\n  );\n};\n\nexport default ProductPage;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,WAAW,QAAQ,OAAO;AACtD,SAASC,SAAS,EAAEC,QAAQ,QAAQ,kBAAkB;AACtD,SAASC,IAAI,QAAQ,MAAM;AAE3B,OAAOC,UAAU,MAAM,wCAAwC;AAC/D,OAAOC,OAAO,MAAM,kCAAkC;AAEtD,OAAOC,GAAG,MAAM,iBAAiB;AACjC,OAAOC,MAAM,MAAM,oBAAoB;AACvC,SAASC,WAAW,QAAQ,2BAA2B;AAAC;AAAA;AAExD,MAAMC,WAAW,GAAG,MAAM;EAAA;EACxB,MAAM;IAAEC;EAAU,CAAC,GAAGT,SAAS,EAAE;EACjC,MAAM;IAAEU;EAAkB,CAAC,GAAGZ,UAAU,CAACS,WAAW,CAAC;EAErD,MAAMI,cAAc,GAAGZ,WAAW,CAAC,MAAMM,GAAG,CAACM,cAAc,CAACF,SAAS,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EACpF,MAAM;IAAEG,IAAI,EAAEC,OAAO;IAAEC,OAAO,EAAEC,UAAU;IAAEC,OAAO;IAAEC;EAAM,CAAC,GAAGX,MAAM,CAACK,cAAc,CAAC;EAErF,MAAMO,aAAa,GAAG,MAAM;IAC1BR,iBAAiB,CAACD,SAAS,EAAEI,OAAO,CAACM,KAAK,CAAC,CAACC,IAAI,CAAEC,aAAa,IAAKN,UAAU,CAACM,aAAa,CAAC,CAAC;EAChG,CAAC;EAED,oBACE;IAAA,wBACE,QAAC,UAAU;MAAC,KAAK,EAAER,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAES,IAAK;MAAC,UAAU,EAAC,gCAAO;MAAC,IAAI,EAAE;IAAW;MAAA;MAAA;MAAA;IAAA,QAAc,EACnFN,OAAO,gBAAG,QAAC,IAAI;MAAA;MAAA;MAAA;IAAA,QAAG,GAAGC,KAAK,gBAAG,QAAC,QAAQ;MAAC,EAAE,EAAC;IAAG;MAAA;MAAA;MAAA;IAAA,QAAY,gBAAG,QAAC,OAAO;MAAA,GAAKJ,OAAO;MAAE,iBAAiB,EAAEK;IAAc;MAAA;MAAA;MAAA;IAAA,QAAW;EAAA,gBAC9H;AAEP,CAAC;AAAC,GAjBIV,WAAW;EAAA,QACOR,SAAS,EAIgCM,MAAM;AAAA;AAAA,KALjEE,WAAW;AAmBjB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}