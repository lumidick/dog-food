{"ast":null,"code":"var _jsxFileName = \"/home/titus/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dog-food/src/pages/Product/ProductPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext, useCallback } from 'react';\nimport { Spin } from 'antd';\nimport api from '../../utils/api';\nimport Product from '../../components/Product/Product';\nimport { useParams, useNavigate, Navigate } from 'react-router-dom';\nimport useApi from '../../hooks/useAPI';\nimport { UserContext } from '../../context/userContext';\nimport { LoadingContext } from '../../context/loadingContext';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProductPage = () => {\n  _s();\n  // const [product, setProduct] = useState({});\n  // const [error, setError] = useState(false);\n  // const { isLoading, changeIsLoading } = useContext(LoadingContext);\n\n  const {\n    productId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    handleProductLike\n  } = useContext(UserContext);\n  const getProductInfo = useCallback(() => api.getProductInfo(productId), [productId]);\n  const {\n    data: product,\n    setData: setProduct,\n    loading,\n    error\n  } = useApi(getProductInfo);\n  const onProductLike = () => {\n    handleProductLike(productId, product.likes).then(updateProduct => setProduct(updateProduct));\n  };\n\n  // useEffect(() => {\n  //   changeIsLoading(true);\n  //   api\n  //     .getProductInfo(productId)\n  //     .then((data) => setProduct(data))\n  //     .catch(() => setError(true))\n  //     .finally(() => changeIsLoading(false));\n  // }, []);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      title: product === null || product === void 0 ? void 0 : product.name,\n      buttonText: \"\\u041D\\u0430\\u0437\\u0430\\u0434\",\n      link: '/catalog'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 18\n    }, this) : error ? /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 37\n    }, this) : /*#__PURE__*/_jsxDEV(Product, {\n      ...product,\n      handleProductLike: onProductLike\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 68\n    }, this)]\n  }, void 0, true);\n};\n_s(ProductPage, \"IjNmc+n0sUNLDwEiM7S3rco5lRk=\", false, function () {\n  return [useParams, useNavigate, useApi];\n});\n_c = ProductPage;\nexport default ProductPage;\nvar _c;\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useCallback","Spin","api","Product","useParams","useNavigate","Navigate","useApi","UserContext","LoadingContext","PageHeader","ProductPage","productId","navigate","handleProductLike","getProductInfo","data","product","setData","setProduct","loading","error","onProductLike","likes","then","updateProduct","name"],"sources":["/home/titus/Рабочий стол/dog-food/src/pages/Product/ProductPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext, useCallback } from 'react';\nimport { Spin } from 'antd';\nimport api from '../../utils/api';\nimport Product from '../../components/Product/Product';\nimport { useParams, useNavigate, Navigate } from 'react-router-dom';\n\nimport useApi from '../../hooks/useAPI';\nimport { UserContext } from '../../context/userContext';\nimport { LoadingContext } from '../../context/loadingContext';\nimport PageHeader from '../../components/PageHeader/PageHeader';\n\nconst ProductPage = () => {\n  // const [product, setProduct] = useState({});\n  // const [error, setError] = useState(false);\n  // const { isLoading, changeIsLoading } = useContext(LoadingContext);\n\n  const { productId } = useParams();\n  const navigate = useNavigate();\n  const { handleProductLike } = useContext(UserContext);\n\n  const getProductInfo = useCallback(() => api.getProductInfo(productId), [productId]);\n  const { data: product, setData: setProduct, loading, error } = useApi(getProductInfo);\n\n  const onProductLike = () => {\n    handleProductLike(productId, product.likes).then((updateProduct) => setProduct(updateProduct));\n  };\n\n  // useEffect(() => {\n  //   changeIsLoading(true);\n  //   api\n  //     .getProductInfo(productId)\n  //     .then((data) => setProduct(data))\n  //     .catch(() => setError(true))\n  //     .finally(() => changeIsLoading(false));\n  // }, []);\n\n  return (\n    <>\n      <PageHeader title={product?.name} buttonText=\"Назад\" link={'/catalog'}></PageHeader>\n      {loading ? <Spin /> : error ? <Navigate to=\"/\"></Navigate> : <Product {...product} handleProductLike={onProductLike}></Product>}\n    </>\n  );\n};\n\nexport default ProductPage;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,WAAW,QAAQ,OAAO;AAC3E,SAASC,IAAI,QAAQ,MAAM;AAC3B,OAAOC,GAAG,MAAM,iBAAiB;AACjC,OAAOC,OAAO,MAAM,kCAAkC;AACtD,SAASC,SAAS,EAAEC,WAAW,EAAEC,QAAQ,QAAQ,kBAAkB;AAEnE,OAAOC,MAAM,MAAM,oBAAoB;AACvC,SAASC,WAAW,QAAQ,2BAA2B;AACvD,SAASC,cAAc,QAAQ,8BAA8B;AAC7D,OAAOC,UAAU,MAAM,wCAAwC;AAAC;AAAA;AAEhE,MAAMC,WAAW,GAAG,MAAM;EAAA;EACxB;EACA;EACA;;EAEA,MAAM;IAAEC;EAAU,CAAC,GAAGR,SAAS,EAAE;EACjC,MAAMS,QAAQ,GAAGR,WAAW,EAAE;EAC9B,MAAM;IAAES;EAAkB,CAAC,GAAGf,UAAU,CAACS,WAAW,CAAC;EAErD,MAAMO,cAAc,GAAGf,WAAW,CAAC,MAAME,GAAG,CAACa,cAAc,CAACH,SAAS,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EACpF,MAAM;IAAEI,IAAI,EAAEC,OAAO;IAAEC,OAAO,EAAEC,UAAU;IAAEC,OAAO;IAAEC;EAAM,CAAC,GAAGd,MAAM,CAACQ,cAAc,CAAC;EAErF,MAAMO,aAAa,GAAG,MAAM;IAC1BR,iBAAiB,CAACF,SAAS,EAAEK,OAAO,CAACM,KAAK,CAAC,CAACC,IAAI,CAAEC,aAAa,IAAKN,UAAU,CAACM,aAAa,CAAC,CAAC;EAChG,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,oBACE;IAAA,wBACE,QAAC,UAAU;MAAC,KAAK,EAAER,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAES,IAAK;MAAC,UAAU,EAAC,gCAAO;MAAC,IAAI,EAAE;IAAW;MAAA;MAAA;MAAA;IAAA,QAAc,EACnFN,OAAO,gBAAG,QAAC,IAAI;MAAA;MAAA;MAAA;IAAA,QAAG,GAAGC,KAAK,gBAAG,QAAC,QAAQ;MAAC,EAAE,EAAC;IAAG;MAAA;MAAA;MAAA;IAAA,QAAY,gBAAG,QAAC,OAAO;MAAA,GAAKJ,OAAO;MAAE,iBAAiB,EAAEK;IAAc;MAAA;MAAA;MAAA;IAAA,QAAW;EAAA,gBAC9H;AAEP,CAAC;AAAC,GA/BIX,WAAW;EAAA,QAKOP,SAAS,EACdC,WAAW,EAImCE,MAAM;AAAA;AAAA,KAVjEI,WAAW;AAiCjB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}